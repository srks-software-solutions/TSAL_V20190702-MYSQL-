@model Tata.Models.tblreportholder
@{
    ViewBag.Title = "UnitWorks - Loss Register";
}
<link href="~/Content1/bootstrap/css/datepicker.css" rel="stylesheet" />
@*<link href="~/Content1/bootstrap/css/jquery.timeentry.css" rel="stylesheet" />*@
<script src="~/Content1/bootstrap/js/jquery.js"></script>
<script src="~/Content1/bootstrap/js/jquery-ui-1.10.3.js"></script>
<script src="~/Content1/bootstrap/js/bootstrap-datepicker.js"></script>
<script src="~/Content1/bootstrap/js/bootstrap.js"></script>
<script src="~/Content1/bootstrap/js/jquery.plugin.js"></script>


<script src="js/jquery.min.js"></script>
<script src="js/kendo.all.min.js"></script>

<script src="~/Content1/jquery.datetimepicker.js" type="text/javascript"></script>
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)  
    <div class="wrp clearfix">@*style="background-color:red" box outside create role*@
        <div class="fluid">
            <div class="widget col-md- grid12">
                <div class="widget-header">
                    <div class="widget-title">
                        <div style="font-size: 1.5vw">Idle List Report</div>
                    </div>
                </div>
                <!-- /widget-header -->

                <!-- /widget-header -->
                <div class="widget-content pad20f">

                    <label for="input-1" class="stacked-label" style="resize: horizontal; width: 20%; padding-top: 2%; margin-left: 2%; color: blue; font-style: oblique">Plant Name</label>
                    <label for="input-1" class="stacked-label" style="resize: horizontal; padding-top: 2%; margin-left: 2%; width: 20%; color: blue; font-style: oblique">Shop Name</label>
                    <label for="input-1" class="stacked-label" style="resize: horizontal; width: 20%; margin-left: 2%; color: blue; font-style: oblique">Cell Name</label>
                    <label for="input-1" class="stacked-label" style="resize: horizontal; padding-top: 2%; margin-left: 2%; width: 20%; color: blue; font-style: oblique">WorkCenter Name</label>

                    @Html.DropDownList("PlantID", null, "--Select Plant--", new { @id = "PlantID", @class = "stacked-label", @name = "PlantID", @required = "required", @style = "margin-left: 2%;aria-expanded:false;width:20%", @value = ViewData["PlantID"] })
                    @*@Html.DropDownListFor(model => model.PlantID, ViewBag.Plant as IEnumerable<SelectListItem>, "--Select Plant--", new { @id = "PlantID", @class = "stacked-label", @name = "PlantID", @required = "required", @style = "margin-left: 2%;aria-expanded:false;width:20%" })*@

                    @*@Html.DropDownListFor(model => model.ShopID, ViewBag.Shop as IEnumerable<SelectListItem>, "--Select Shop--", new { @id = "ShopID", @class = "stacked-label", @name = "ShopID", @style = "margin-left: 2%;aria-expanded:false;width:20%" })*@
                    @Html.DropDownList("ShopID", null, "--Select Shop--", new { @id = "ShopID", @class = "stacked-label", @name = "ShopID", @style = "margin-left: 2%;aria-expanded:false;width:20%", @value = ViewData["ShopID"]})

                    @*@Html.DropDownListFor(model => model.CellID, ViewBag.Cell as IEnumerable<SelectListItem>, "--Select Cell--", new { @id = "CellID", @class = "stacked-label", @name = "CellID", @style = "margin-left: 2%;aria-expanded:false;width:20%" })*@
                    @Html.DropDownList("CellID", null, "--Select Cell--", new { @id = "CellID", @class = "stacked-label", @name = "CellID", @style = "margin-left: 2%;aria-expanded:false;width:20%", @value = ViewData["CellID"] })

                    @*@Html.DropDownListFor(model => model.MachineID, ViewBag.WCID as IEnumerable<SelectListItem>, "--Select WorkCenter--", new { @id = "WorkCenterID", @class = "stacked-label", @name = "WorkCenterID", @style = "margin-left: 2%;aria-expanded:false;width:20%" })*@
                    @Html.DropDownList("WorkCenterID", null, "--Select WC--", new { @id = "WorkCenterID", @class = "stacked-label", @name = "WorkCenterID", @style = "margin-left: 2%;aria-expanded:false;width:20%", @value = ViewData["WorkCenterID"] })

                    <br />
                    <label for="input-1" class="stacked-label" style="resize: horizontal; padding-top: 2%; margin-left: 2%; width: 20%; color: blue; font-style: oblique">Start Date</label>
                    <label for="input-1" class="stacked-label" style="resize: horizontal; width: 20%; margin-left: 2%; color: blue; font-style: oblique">End Date</label>
                    <br />
                    @* @Html.TextBox("StartDate",null, new { @id = "from", @name = "from", @class = "second fdate",  @style = "margin-left: 2%;aria-expanded:false;width:20%", @placeholder = "Enter StartDate", @required = "required" })
                    @Html.TextBox("EndDate",null,  new { @id = "to", @name = "to", @class = "second fdate", @style = "margin-left: 2%;aria-expanded:false;width:20%", @placeholder = "Enter EndDate ", @required = "required"  })
                   *@
                    @Html.TextBoxFor(model => model.FromDate, new { @id = "from", @name = "from", @class = "second fdate", @style = "margin-left: 2%;aria-expanded:false;width:20%", @placeholder = "Enter StartDate", @required = "required" })
                    @Html.TextBoxFor(model => model.ToDate, new { @id = "to", @name = "to", @class = "second fdate", @style = "margin-left: 2%;aria-expanded:false;width:20%", @placeholder = "Enter EndDate ", @required = "required" })


                    @* @Html.TextBoxFor(model => model.FromDate, new { @id = "FPYLossProdStartDate", @name = "FPYLossProdStartDate", @placeholder = "FromDate", @class = "form-control fdate", @required = "required" })
                    @Html.TextBoxFor(model => model.ToDate, new { @id = "FPYLossProdStartDate", @name = "FPYLossProdStartDate", @placeholder = "To Date", @class = "form-control fdate", @required = "required" })*@

                    <br />

                    <div id="DateRange" class="container" style="font-family: Calibri; font-size: 20px">
                        @*<div class="row">
                            <div class='col-xs-3'>
                                <div class='form-group'>
                                    <label class="control-label">Start Date</label>
                                    <div class="editor-field" style="align-items: center">
                                        @Html.TextBoxFor(model => model.FromDate, new { @id = "FPYLossProdStartDate", @name = "FPYLossProdStartDate", @placeholder = "FromDate", @class = "form-control fdate", @required = "required" })
                                        @Html.HiddenFor(model => model.FromDate)
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class='col-xs-3'>
                                <div class='form-group'>
                                    <label class="control-label">End Date</label>
                                    <div class="editor-field" style="align-items: center">
                                        @Html.TextBoxFor(model => model.ToDate, new { @id = "FPYLossProdStartDate", @name = "FPYLossProdStartDate", @placeholder = "To Date", @class = "form-control fdate", @required = "required" })
                                        @Html.HiddenFor(model => model.ToDate)
                                    </div>
                                </div>
                            </div>
                        </div>*@

                        <div style="width: 3%; display: inline-block; height: inherit"></div>
                        @Html.ActionLink(" Back ", "Index", "Dashboard", new { }, new { @class = "btn stacked-input fa fa-reply", @style = "text-decoration:none;display:inline-block;color:black" })
                        <div style="width: 10%; display: inline-block; height: inherit"></div>
                        <input type="submit" value="Generate" class="btn btn-lavender inverse" style="width: 30%; display: inline-block; height: inherit; margin-top: 2%; color: white; background-color: grey; font-size: 1.1vw" />

                    </div>

                </div>
                <!-- /widget-content -->
            </div>
            <!-- /widget -->
        </div>
        <!-- /Class-fluid-->
    </div>
  
}

<style>
    input {
        font-style: oblique;
        color: blue;
    }
</style>

<script>
    $("#PlantID").on("change", function () {
        $("#ShopID").empty();
        $("#CellID").empty();
        $("#WorkCenterID").empty();
        var selectedID = $("#PlantID option:selected").val();
        $.getJSON("/ShiftPlanner/GetShop", { PlantID: selectedID }, function (data) {
            $.each(data, function (index, item) {
                $("#ShopID").append("<option value='" + item.Value + "'>" + item.Text + "</option>");
            });
            $("#ShopID").prepend("<option value='' selected='selected'></option>");
            $("#WorkCenterID").prepend("<option value='' selected='selected'></option>");
        });
    });

    $("#ShopID").on("change", function () {
        $("#CellID").empty();
        $("#WorkCenterID").empty();
        var selectedID = $("#ShopID option:selected").val();
        $.getJSON("/ShiftPlanner/GetCell", { ShopID: selectedID }, function (data) {
            $.each(data, function (index, item) {
                $("#CellID").append("<option value='" + item.Value + "'>" + item.Text + "</option>");
            });
            $("#CellID").prepend("<option value='' selected='selected'></option>");
        });

        $.getJSON("/ShiftPlanner/GetWC_Shop_MWC", { ShopID: selectedID }, function (data) {
            $.each(data, function (index, item) {
                $("#WorkCenterID").append("<option value='" + item.Value + "'>" + item.Text + "</option>");
            });
            $("#WorkCenterID").prepend("<option value='' selected='selected'></option>");
        });

    });

    $("#CellID").on("change", function () {
        $("#WorkCenterID").empty();
        var selectedID = $("#CellID option:selected").val();
        $.getJSON("/ShiftPlanner/GetWC_Cell_MWC", { CellID: selectedID }, function (data) {
            $.each(data, function (index, item) {
                $("#WorkCenterID").append("<option value='" + item.Value + "'>" + item.Text + "</option>");
            });
            $("#WorkCenterID").prepend("<option value='' selected='selected'></option>");
        });
    });
</script>

<script>
    $(function () {
        var dateFormat = "mm/dd/yy",
          from = $("#from")
            .datepicker({
                minDate: new Date(2016, 11 - 1, 21),
                maxDate: '+50Y',
                defaultDate: "+1w",
                maxDate: "-1d",
            })
            .on("change", function () {
                to.datepicker("option", "minDate", getDate(this));
            }),
          to = $("#to").datepicker({
              defaultDate: "+1w",
              maxDate: "-1d",
          })
          .on("change", function () {
              from.datepicker("option", "maxDate", getDate(this));
          });

        function getDate(element) {
            var date;
            try {
                date = $.datepicker.parseDate(dateFormat, element.value);
            } catch (error) {
                date = null;
            }
            return date;
        }
    });
</script>
